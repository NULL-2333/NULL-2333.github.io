<!DOCTYPE html>
<html  lang="en" >
    <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, maximum-scale=5, viewport-fit=cover">
    <title>iOS设计模式 | Yiming</title>
    <meta name="description" content="单例模式 123456789101112131415161718192021#import &lt;Foundation&#x2F;Foundation.h&gt;@interface SingletonPattern : NSObject- (instancetype) init NS_UNAVAILABLE;+ (instancetype) alloc NS_UNAVAILABLE;+ (in">
<meta property="og:type" content="article">
<meta property="og:title" content="iOS设计模式">
<meta property="og:url" content="http://yoursite.com/iOS%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">
<meta property="og:site_name" content="Yiming">
<meta property="og:description" content="单例模式 123456789101112131415161718192021#import &lt;Foundation&#x2F;Foundation.h&gt;@interface SingletonPattern : NSObject- (instancetype) init NS_UNAVAILABLE;+ (instancetype) alloc NS_UNAVAILABLE;+ (in">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2020-07-26T03:41:36.000Z">
<meta property="article:modified_time" content="2020-08-25T16:25:19.564Z">
<meta property="article:author" content="Yiming">
<meta property="article:tag" content="Objective-C">
<meta property="article:tag" content="iOS">
<meta property="article:tag" content="Design Pattern">
<meta name="twitter:card" content="summary">

    
    <link rel="icon" href="/images/favicon.ico" type="image/x-icon">

    
<link rel="stylesheet" href="/css/common.min.css">



    
    
    
    
        <link href="//cdn.jsdelivr.net/npm/lightgallery.js@1.1.3/dist/css/lightgallery.min.css" rel="stylesheet">
    
    
    
<link rel="stylesheet" href="/css/iconfont.min.css">

    
<meta name="generator" content="Hexo 4.2.1"></head>

    <body>
        <header class="header header-fixture">
    <div class="profile-search-wrap flex sm:block">
        
        
        <div class="profile sm:text-center md:px-1 lg:px-3 sm:pb-4 sm:pt-6">
            <a id="avatar" role="link" href="https://null-2333.github.io" class="inline-block lg:w-16 lg:h-16 w-8 h-8 m-2" target="_self" rel="noopener" rel="noreferrer" >
                <img src="/images/head1.jpeg" class="rounded-full" alt="avatar">
            </a>
            <h2 id="name" class="hidden lg:block" style="font-size: 24px; font-weight: 600; padding-bottom: 10px">Yiming</h2>
            <h3 id="title" class="hidden xl:block">Coding for fun ~</h3>
            
        </div>
        
        
<div class="search flex-1 flex lg:inline-block sm:hidden lg:px-4 lg:mt-2 lg:mb-4 lg:w-full">
    <form id="search-form" class="my-auto flex-1 lg:border lg:border-solid lg:border-gray-200">
        <div class="input-group table bg-gray-100 lg:bg-white w-full">
            <input id="search-input" type="text" style="padding-left: 5px" placeholder="Search" class="inline-block w-full bg-gray-100 lg:bg-white">
            <span class="table-cell">
                <button name="search tigger button" disabled>
                    <i class="iconfont icon-search m-2"></i>
                </button>
            </span>
        </div>
    </form>
        
<script id="search-teamplate" type="text/html" data-path="/content.json">
    <div>
        <div class="search-header bg-gray-400">
            <input id="actual-search-input" model="keyword" ref="input" class="inline-block w-full h-10 px-2 py-1" placeholder="Search" type="text">
        </div>
        <div class="search-result bg-gray-200">
            {{#each searchPosts}}
            <a href="/{{ path }}" class="result-item block px-5 pb-3 pt-1 hover:bg-indigo-100">
                <i class="iconfont icon-file"></i>
                <h1 class="result-title inline font-medium text-lg">{{ title }}</h1>
                <p class="result-content text-gray-600 text-sm">{{{ text }}}</p>
            </a>
            <hr />
            {{/each}}
        </div>
    </div>
</script>

</div>


        <button name="menu toogle button" id="menu-toggle-btn" class="block sm:hidden p-3" role="button" aria-expanded="false">
            <i class="iconfont icon-hamburger"></i>
        </button>
    </div>
    <nav id="menu-nav" class="hidden sm:flex flex-col">
        
        
            <div class="menu-item menu-home" role="menuitem">
                <a href="/.">
                    <i class="iconfont icon-home" aria-hidden="true"></i>
                    <span class="menu-title">Home</span>
                </a>
            </div>
        
        
            <div class="menu-item menu-archives" role="menuitem">
                <a href="/archives">
                    <i class="iconfont icon-archive" aria-hidden="true"></i>
                    <span class="menu-title">Archives</span>
                </a>
            </div>
        
        
            <div class="menu-item menu-tags" role="menuitem">
                <a href="/tags">
                    <i class="iconfont icon-tag" aria-hidden="true"></i>
                    <span class="menu-title">Tags</span>
                </a>
            </div>
        
        
            <div class="menu-item menu-repository" role="menuitem">
                <a href="/repository">
                    <i class="iconfont icon-project" aria-hidden="true"></i>
                    <span class="menu-title">Repository</span>
                </a>
            </div>
        
        
            <div class="menu-item menu-links" role="menuitem">
                <a href="/links">
                    <i class="iconfont icon-friend" aria-hidden="true"></i>
                    <span class="menu-title">Links</span>
                </a>
            </div>
        
        
<div class="social-links flex sm:flex-col lg:hidden mt-5">
    
        <span class="social-item text-center">
            <a href="https://github.com/NULL-2333" target="_blank" rel="noopener">
                <i class="iconfont social-icon icon-github"></i>
                <span class="menu-title hidden lg:inline">menu.github</span>
            </a>
        </span>
    
</div>


    </nav>
</header>

        <section class="main-section">
            
    <main class="flex-1 px-4 py-12 md:px-5 lg:px-8 lg:py-4 relative min-h-screen">
    

    <article class="content article article-archives article-type-list" itemscope="">
        <header class="article-header">
            
    
        <h1 class="article-title text-lg" itemprop="name">
            iOS设计模式
        </h1>
    



            <p class="article-meta mb-3 text-xs">
                
                <span class="article-date">
    <i class="iconfont icon-calendar-check"></i>
	<a href="/iOS%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" class="article-date">
	  <time datetime="2020-07-26T03:41:36.000Z" itemprop="datePublished">Jul 26</time>
	</a>
</span>

                

                
    <span class="article-tags">
    <i class="iconfont icon-tag"></i>
    <a class="article-tag-link" href="/tags/Design-Pattern/" rel="tag">Design Pattern</a>, <a class="article-tag-link" href="/tags/Objective-C/" rel="tag">Objective-C</a>, <a class="article-tag-link" href="/tags/iOS/" rel="tag">iOS</a>
  </span>


                <span class="_partial/post-comment"><i class="icon icon-comment"></i>
                    <a href="/iOS%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/#comments" class="article-comment-link">
                        Comments
                    </a>
                </span>
                
    
        <span class="post-wordcount" itemprop="wordCount">Word Count: 1.6k(words)</span>
    
    


            </p>
        </header>
        <div class="marked-body article-body">
            <h2 id="单例模式">单例模式</h2>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">#import &lt;Foundation&#x2F;Foundation.h&gt;</span><br><span class="line">@interface SingletonPattern : NSObject</span><br><span class="line">- (instancetype) init NS_UNAVAILABLE;</span><br><span class="line">+ (instancetype) alloc NS_UNAVAILABLE;</span><br><span class="line">+ (instancetype) shareInstance;</span><br><span class="line">@end</span><br><span class="line">@implementation SingletonPattern</span><br><span class="line">+ (instancetype) shareInstance</span><br><span class="line">&#123;</span><br><span class="line">  static dispatch_once_t onceToken;</span><br><span class="line">  static SingletonPattern *instance;</span><br><span class="line">  dispatch_once(&amp;onceToken, ^&#123;</span><br><span class="line">    instance &#x3D; [[self alloc] init];</span><br><span class="line">  &#125;);</span><br><span class="line">  return instance;</span><br><span class="line">&#125;</span><br><span class="line">@end</span><br><span class="line">&#x2F;&#x2F; 使用</span><br><span class="line">SingletonPattern *singletonObject1 &#x3D; [SingletonPattern shareInstance];</span><br><span class="line">SingletonPattern *singletonObject2 &#x3D; [SingletonPattern shareInstance];</span><br><span class="line">NSLog(@&quot;\n%@\n%@&quot;, singletonObject1, singletonObject2);</span><br></pre></td></tr></table></figure>
<h2 id="工厂模式">工厂模式</h2>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">#import &lt;Foundation&#x2F;Foundation.h&gt;</span><br><span class="line">@interface FactoryPattern : NSObject</span><br><span class="line">+ (instancetype) createWithType: (NSString *) className;</span><br><span class="line">@end</span><br><span class="line">@implementation FactoryPattern</span><br><span class="line">+ (instancetype)createWithType:(NSString *)className</span><br><span class="line">&#123;</span><br><span class="line">  Class class &#x3D; NSClassFromString(className);</span><br><span class="line">  return [[class alloc] init];</span><br><span class="line">&#125;</span><br><span class="line">@end</span><br><span class="line">&#x2F;&#x2F; 使用</span><br><span class="line">id factoryObject1 &#x3D; [FactoryPattern createWithType:@&quot;UITableView&quot;];</span><br><span class="line">id factoryObject2 &#x3D; [FactoryPattern createWithType:@&quot;UIView&quot;];</span><br><span class="line">NSLog(@&quot;%@ %@&quot;, NSStringFromClass([factoryObject1 class]), NSStringFromClass([factoryObject2 class]));</span><br></pre></td></tr></table></figure>
<p>这里的createWithType可以写成任意形式，参数也可以指定为任意的不同类的区分方式</p>
<h2 id="抽象工厂模式">抽象工厂模式</h2>
<p>和工厂模式的区别在于多了一层抽象工厂和子工厂的区别</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">@interface AbstractFactoryPattern : NSObject</span><br><span class="line">- (UIView *) createViewWithType: (NSInteger) type;</span><br><span class="line">- (UIColor *) createColorWithName: (NSString *) colorName;</span><br><span class="line">+ (Class) getConcreteFactory: (NSString *) factoryType;</span><br><span class="line">@end</span><br><span class="line">@implementation AbstractFactoryPattern</span><br><span class="line">- (UIView *)createViewWithType:(NSInteger)type</span><br><span class="line">&#123;</span><br><span class="line">  return nil;</span><br><span class="line">&#125;</span><br><span class="line">- (UIColor *)createColorWithName:(NSString *)colorName</span><br><span class="line">&#123;</span><br><span class="line">  return nil;</span><br><span class="line">&#125;</span><br><span class="line">+ (Class) getConcreteFactory: (NSString *) factoryType</span><br><span class="line">&#123;</span><br><span class="line">  if ([factoryType isEqualToString:@&quot;View&quot;]) &#123;</span><br><span class="line">    return [ConcreteFactory1 class];</span><br><span class="line">  &#125;</span><br><span class="line">  else&#123;</span><br><span class="line">    return [ConcreteFactory2 class];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">@end</span><br><span class="line">@interface ConcreteFactory1 : AbstractFactoryPattern</span><br><span class="line">@end</span><br><span class="line">@implementation ConcreteFactory1</span><br><span class="line">- (UIView *) createViewWithType: (NSInteger) type</span><br><span class="line">&#123;</span><br><span class="line">  switch (type) &#123;</span><br><span class="line">    case 1:</span><br><span class="line">      return [[UITableView alloc] init];</span><br><span class="line">      break;</span><br><span class="line">    case 2:</span><br><span class="line">      return [[UICollectionView alloc] init];</span><br><span class="line">      break;</span><br><span class="line">    default:</span><br><span class="line">      return [[UIView alloc] init];</span><br><span class="line">      break;</span><br><span class="line">  &#125;</span><br><span class="line">  return nil;</span><br><span class="line">&#125;</span><br><span class="line">@end</span><br><span class="line">@interface ConcreteFactory2 : AbstractFactoryPattern</span><br><span class="line">@end</span><br><span class="line">@implementation ConcreteFactory2</span><br><span class="line">- (UIColor *) createColorWithName: (NSString *) colorName</span><br><span class="line">&#123;</span><br><span class="line">  if ([colorName isEqualToString:@&quot;red&quot;]) &#123;</span><br><span class="line">    return [UIColor redColor];</span><br><span class="line">  &#125;</span><br><span class="line">  else if ([colorName isEqualToString:@&quot;blue&quot;]) &#123;</span><br><span class="line">    return [UIColor blueColor];</span><br><span class="line">  &#125;</span><br><span class="line">  else&#123;</span><br><span class="line">    return [UIColor blackColor];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">@end</span><br><span class="line">&#x2F;&#x2F; 使用</span><br><span class="line">AbstractFactoryPattern *concreteFactory1 &#x3D; [[[AbstractFactoryPattern getConcreteFactory:@&quot;View&quot;] alloc] init];</span><br><span class="line">UIView *viewFromFactory1 &#x3D; [concreteFactory1 createViewWithType:1];</span><br><span class="line">AbstractFactoryPattern *concreteFactory2 &#x3D; [[[AbstractFactoryPattern getConcreteFactory:@&quot;Color&quot;] alloc] init];</span><br><span class="line">UIColor *colorFromFactory2 &#x3D; [concreteFactory2 createColorWithName:@&quot;red&quot;];</span><br><span class="line">NSLog(@&quot;%@ %@&quot;, NSStringFromClass([viewFromFactory1 class]), NSStringFromClass([colorFromFactory2 class]));</span><br></pre></td></tr></table></figure>
<h2 id="原型模式">原型模式</h2>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">@protocol PrototypeCopyProtocol &lt;NSObject&gt;</span><br><span class="line">@required</span><br><span class="line">- (id)clone;</span><br><span class="line">@end</span><br><span class="line">@interface PrototypePattern : NSObject &lt;PrototypeCopyProtocol&gt;</span><br><span class="line">@property (nonatomic, copy) NSString *name;</span><br><span class="line">@property (nonatomic, copy) NSString *sex;</span><br><span class="line">@property (nonatomic, assign)NSInteger age;</span><br><span class="line">- (instancetype) initWithName: (NSString *) name andSex: (NSString *) sex andAge: (NSInteger) age;</span><br><span class="line">@end</span><br><span class="line">@implementation PrototypePattern</span><br><span class="line">- (instancetype) initWithName: (NSString *) name andSex: (NSString *) sex andAge: (NSInteger) age</span><br><span class="line">&#123;</span><br><span class="line">  if (self &#x3D; [super init]) &#123;</span><br><span class="line">    _name &#x3D; name;</span><br><span class="line">    _sex &#x3D; sex;</span><br><span class="line">    _age &#x3D; age;</span><br><span class="line">  &#125;</span><br><span class="line">  return self;</span><br><span class="line">&#125;</span><br><span class="line">- (id)clone</span><br><span class="line">&#123;</span><br><span class="line">  PrototypePattern *prototypeObject &#x3D; [[PrototypePattern alloc] init];</span><br><span class="line">  prototypeObject.name &#x3D; self.name;</span><br><span class="line">  prototypeObject.sex &#x3D; self.sex;</span><br><span class="line">  prototypeObject.age &#x3D; self.age;</span><br><span class="line">  return prototypeObject;</span><br><span class="line">&#125;</span><br><span class="line">- (NSString *)description</span><br><span class="line">&#123;</span><br><span class="line">  return [NSString stringWithFormat:@&quot;Name: %@, Sex: %@, Age: %ld&quot;, _name, _sex, (long)_age];</span><br><span class="line">&#125;</span><br><span class="line">@end</span><br><span class="line">&#x2F;&#x2F; 使用</span><br><span class="line">PrototypePattern *prototypeObject1 &#x3D; [[PrototypePattern alloc] initWithName:@&quot;Peer&quot; andSex:@&quot;Male&quot; andAge:22];</span><br><span class="line">PrototypePattern *prototypeObject2 &#x3D; [prototypeObject1 clone];</span><br><span class="line">NSLog(@&quot;%@\n%@&quot;, prototypeObject1, prototypeObject2);</span><br></pre></td></tr></table></figure>
<h2 id="生成器模式">生成器模式</h2>
<p>生成器模式和抽象工厂模式的区别在于生成器模式采用的是分part的方式，一次需要一个director指导者对象来调用生成器对象生成对象。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line">@interface BuilderPatternDirector : NSObject</span><br><span class="line">@property (nonatomic, strong) AbstractBuilderPattern *builder;</span><br><span class="line">- (instancetype) initWithBuilder:(AbstractBuilderPattern *) builder;</span><br><span class="line">- (BuilderPatternProduct *) construct;</span><br><span class="line">@end</span><br><span class="line">@implementation BuilderPatternDirector</span><br><span class="line">- (BuilderPatternProduct *)construct</span><br><span class="line">&#123;</span><br><span class="line">  [_builder buildPartA];</span><br><span class="line">  [_builder buildPartB];</span><br><span class="line">  [_builder buildPartC];</span><br><span class="line">  return [_builder getResult];</span><br><span class="line">&#125;</span><br><span class="line">- (instancetype)initWithBuilder:(AbstractBuilderPattern *)builder</span><br><span class="line">&#123;</span><br><span class="line">  if (self &#x3D; [super init]) &#123;</span><br><span class="line">    _builder &#x3D; builder;</span><br><span class="line">    _builder.product &#x3D; [[BuilderPatternProduct alloc] init];</span><br><span class="line">  &#125;</span><br><span class="line">  return self;</span><br><span class="line">&#125;</span><br><span class="line">@end</span><br><span class="line">@interface BuilderPatternProduct : NSObject</span><br><span class="line">@property (nonatomic, copy) NSString *name;</span><br><span class="line">@property (nonatomic, copy) NSString *sex;</span><br><span class="line">@property (nonatomic, assign)NSInteger age;</span><br><span class="line">@end</span><br><span class="line">@implementation BuilderPatternProduct</span><br><span class="line">- (NSString *)description</span><br><span class="line">&#123;</span><br><span class="line">  return [NSString stringWithFormat:@&quot;Name: %@, Sex: %@, Age: %ld&quot;, _name, _sex, (long)_age];</span><br><span class="line">&#125;</span><br><span class="line">@end</span><br><span class="line">@interface AbstractBuilderPattern : NSObject</span><br><span class="line">- (void) buildPartA;</span><br><span class="line">- (void) buildPartB;</span><br><span class="line">- (void) buildPartC;</span><br><span class="line">- (BuilderPatternProduct *) getResult;</span><br><span class="line">@property (nonatomic, strong) BuilderPatternProduct *product;</span><br><span class="line">@end</span><br><span class="line">@implementation AbstractBuilderPattern</span><br><span class="line">- (void)buildPartA</span><br><span class="line">&#123;</span><br><span class="line">  return;</span><br><span class="line">&#125;</span><br><span class="line">- (void)buildPartB</span><br><span class="line">&#123;</span><br><span class="line">  return;</span><br><span class="line">&#125;</span><br><span class="line">- (void)buildPartC</span><br><span class="line">&#123;</span><br><span class="line">  return;</span><br><span class="line">&#125;</span><br><span class="line">- (BuilderPatternProduct *)getResult</span><br><span class="line">&#123;</span><br><span class="line">  return nil;</span><br><span class="line">&#125;</span><br><span class="line">@end</span><br><span class="line">@interface ConcreteBuilderPattern : AbstractBuilderPattern</span><br><span class="line">@end</span><br><span class="line">@implementation ConcreteBuilderPattern</span><br><span class="line">- (void)buildPartA</span><br><span class="line">&#123;</span><br><span class="line">  self.product.name &#x3D; @&quot;Peer&quot;;</span><br><span class="line">&#125;</span><br><span class="line">- (void)buildPartB</span><br><span class="line">&#123;</span><br><span class="line">  self.product.sex &#x3D; @&quot;Male&quot;;</span><br><span class="line">&#125;</span><br><span class="line">- (void)buildPartC</span><br><span class="line">&#123;</span><br><span class="line">  self.product.age &#x3D; 23;</span><br><span class="line">&#125;</span><br><span class="line">- (BuilderPatternProduct *)getResult</span><br><span class="line">&#123;</span><br><span class="line">  return self.product;</span><br><span class="line">&#125;</span><br><span class="line">@end</span><br><span class="line">&#x2F;&#x2F; 使用</span><br><span class="line">ConcreteBuilderPattern *builder &#x3D; [[ConcreteBuilderPattern alloc] init];</span><br><span class="line">BuilderPatternDirector *director &#x3D; [[BuilderPatternDirector alloc] initWithBuilder:builder];</span><br><span class="line">BuilderPatternProduct *product &#x3D; [director construct];</span><br><span class="line">NSLog(@&quot;%@&quot;, product);</span><br></pre></td></tr></table></figure>
<h2 id="代理模式">代理模式</h2>
<p>即对应OC中的protocol和delegate的使用wqdawd</p>
<h2 id="适配器模式">适配器模式</h2>
<p>用于对接不同类型的接口</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">@interface OriginalClassForAdapterPattern : NSObject</span><br><span class="line">- (void) printNSArray: (NSArray *) arr;</span><br><span class="line">@end</span><br><span class="line">@implementation OriginalClassForAdapterPattern</span><br><span class="line">- (void) printNSArray: (NSArray *) arr</span><br><span class="line">&#123;</span><br><span class="line">  NSLog(@&quot;%@&quot;, arr);</span><br><span class="line">&#125;</span><br><span class="line">@end</span><br><span class="line">@interface Adapter : NSObject</span><br><span class="line">@property (nonatomic, strong) OriginalClassForAdapterPattern *originalClass;</span><br><span class="line">- (void) printArr1: (NSArray *) arr1 andArr2: (NSArray *) arr2;</span><br><span class="line">@end</span><br><span class="line">@implementation Adapter</span><br><span class="line">- (instancetype)init</span><br><span class="line">&#123;</span><br><span class="line">  self &#x3D; [super init];</span><br><span class="line">  if (self) &#123;</span><br><span class="line">    _originalClass &#x3D; [[OriginalClassForAdapterPattern alloc] init];</span><br><span class="line">  &#125;</span><br><span class="line">  return self;</span><br><span class="line">&#125;</span><br><span class="line">- (void)printArr1:(NSArray *)arr1 andArr2:(NSArray *)arr2</span><br><span class="line">&#123;</span><br><span class="line">  NSArray *arr &#x3D; [arr1 arrayByAddingObjectsFromArray:arr2];</span><br><span class="line">  [_originalClass printNSArray:arr];</span><br><span class="line">&#125;</span><br><span class="line">@end</span><br><span class="line">&#x2F;&#x2F; 用法</span><br><span class="line">NSArray *arr1 &#x3D; @[@&quot;eeeee&quot;], *arr2 &#x3D; @[@&quot;wwwwww&quot;];</span><br><span class="line">Adapter *adapter &#x3D; [[Adapter alloc] init];</span><br><span class="line">[adapter printArr1:arr1 andArr2:arr2];</span><br></pre></td></tr></table></figure>
<h2 id="外观模式">外观模式</h2>
<p>外观模式就相当于对一系列的类做一个上层的封装</p>
<h2 id="桥接模式">桥接模式</h2>
<p>桥接模式类似适配器模式，通过将两个类各自抽象出一个抽象类，从而使得耦合都发生在抽象类之间，实现子类的完全解耦。</p>
<h2 id="装饰器模式">装饰器模式</h2>
<p>即相当于category</p>
<h2 id="观察者模式">观察者模式</h2>
<p>即相当于OC中的observer系列使用，主要是双向绑定与耦合的作用，当observe的对象的属性变化时，则可以作出对应的操作。主要是通过实现如下方法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary&lt;NSKeyValueChangeKey, id&gt; *)change context:(void *)context;</span><br></pre></td></tr></table></figure>
<p>注意点在于，有addObserver就一定要记得removeObserver</p>
<h2 id="策略模式">策略模式</h2>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">@interface AbstractStrategyPattern : NSObject</span><br><span class="line">- (void) testWithStrategy: (NSString *) str;</span><br><span class="line">@end</span><br><span class="line">@implementation AbstractStrategyPattern</span><br><span class="line">- (void)testWithStrategy:(NSString *)str</span><br><span class="line">&#123;</span><br><span class="line">  return;</span><br><span class="line">&#125;</span><br><span class="line">@end</span><br><span class="line">@interface ConcreteStrategyPattern1 : AbstractStrategyPattern</span><br><span class="line">@end</span><br><span class="line">@implementation ConcreteStrategyPattern1</span><br><span class="line">- (void)testWithStrategy:(NSString *)str</span><br><span class="line">&#123;</span><br><span class="line">  NSLog(@&quot;Strategy1 - %@&quot;, str);</span><br><span class="line">&#125;</span><br><span class="line">@end</span><br><span class="line">@interface ConcreteStrategyPattern2 : AbstractStrategyPattern</span><br><span class="line">@end</span><br><span class="line">@implementation ConcreteStrategyPattern2</span><br><span class="line">- (void)testWithStrategy:(NSString *)str</span><br><span class="line">&#123;</span><br><span class="line">  NSLog(@&quot;Strategy2 - %@&quot;, str);</span><br><span class="line">&#125;</span><br><span class="line">@end</span><br><span class="line">&#x2F;&#x2F; 使用</span><br><span class="line">AbstractStrategyPattern *strategy1 &#x3D; [[ConcreteStrategyPattern1 alloc] init];</span><br><span class="line">AbstractStrategyPattern *strategy2 &#x3D; [[ConcreteStrategyPattern2 alloc] init];</span><br><span class="line">if ([strategy1 respondsToSelector:@selector(testWithStrategy:)]) &#123;</span><br><span class="line">  [strategy1 testWithStrategy:@&quot;Strategy&quot;];</span><br><span class="line">&#125;</span><br><span class="line">if ([strategy2 respondsToSelector:@selector(testWithStrategy:)]) &#123;</span><br><span class="line">  [strategy2 testWithStrategy:@&quot;Strategy&quot;];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="责任链模式">责任链模式</h2>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">@interface AbstractNodeInChain : NSObject</span><br><span class="line">@property (nonatomic, strong) AbstractNodeInChain *nextNode;</span><br><span class="line">- (void) transimitMsgInChain: (NSString *) msg;</span><br><span class="line">- (void) printMsg: (NSString *) msg;</span><br><span class="line">@end</span><br><span class="line">@implementation AbstractNodeInChain</span><br><span class="line">- (void)transimitMsgInChain:(NSString *)msg</span><br><span class="line">&#123;</span><br><span class="line">  AbstractNodeInChain *node &#x3D; self;</span><br><span class="line">  while (![node respondsToSelector:@selector(printMsg:)] &amp;&amp; node !&#x3D; nil)&#123;</span><br><span class="line">    node &#x3D; [node nextNode];</span><br><span class="line">  &#125;</span><br><span class="line">  if (node !&#x3D; nil) &#123;</span><br><span class="line">    [node printMsg:msg];</span><br><span class="line">  &#125;</span><br><span class="line">  else&#123;</span><br><span class="line">    NSLog(@&quot;No node in chain can response.&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">@end</span><br><span class="line">@interface ResponsibilityChainPattern : NSObject</span><br><span class="line">- (AbstractNodeInChain *)getNodeChain;</span><br><span class="line">- (void) logMsgByChain: (NSString *) msg;</span><br><span class="line">@end</span><br><span class="line">@interface NodeA : AbstractNodeInChain</span><br><span class="line">@end</span><br><span class="line">@implementation NodeA</span><br><span class="line">@end</span><br><span class="line">@interface NodeB : AbstractNodeInChain</span><br><span class="line">@end</span><br><span class="line">@implementation NodeB</span><br><span class="line">@end</span><br><span class="line">@interface NodeC : AbstractNodeInChain</span><br><span class="line">@end</span><br><span class="line">@implementation NodeC</span><br><span class="line">- (void)printMsg:(NSString *)msg</span><br><span class="line">&#123;</span><br><span class="line">  NSLog(@&quot;%@ - by NodeC&quot;, msg);</span><br><span class="line">&#125;</span><br><span class="line">@end</span><br><span class="line">@implementation ResponsibilityChainPattern</span><br><span class="line">- (AbstractNodeInChain *)getNodeChain</span><br><span class="line">&#123;</span><br><span class="line">  NodeA *nodeA &#x3D; [[NodeA alloc] init];</span><br><span class="line">  NodeB *nodeB &#x3D; [[NodeB alloc] init];</span><br><span class="line">  NodeC *nodeC &#x3D; [[NodeC alloc] init];</span><br><span class="line">  </span><br><span class="line">  nodeA.nextNode &#x3D; nodeB;</span><br><span class="line">  nodeB.nextNode &#x3D; nodeC;</span><br><span class="line">  return nodeA;</span><br><span class="line">&#125;</span><br><span class="line">- (void)logMsgByChain:(NSString *)msg</span><br><span class="line">&#123;</span><br><span class="line">  AbstractNodeInChain *node &#x3D; [self getNodeChain];</span><br><span class="line">  [node transimitMsgInChain:msg];</span><br><span class="line">&#125;</span><br><span class="line">@end</span><br><span class="line">&#x2F;&#x2F; 使用</span><br><span class="line">ResponsibilityChainPattern *responsibilityChainPattern &#x3D; [[ResponsibilityChainPattern alloc] init];</span><br><span class="line">[responsibilityChainPattern logMsgByChain:@&quot;Here we go!&quot;];</span><br></pre></td></tr></table></figure>
<h2 id="Target-Action模式">Target-Action模式</h2>
<p>即常用的addTarget:action函数</p>
<h2 id="中介者模式">中介者模式</h2>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">@protocol AbstractMediatorProtocol &lt;NSObject&gt;</span><br><span class="line">@optional</span><br><span class="line">- (void) showMsg: (NSString *)msg;</span><br><span class="line">@end</span><br><span class="line">@interface Mediator : NSObject &lt;AbstractMediatorProtocol&gt;</span><br><span class="line">@end</span><br><span class="line">@implementation Mediator</span><br><span class="line">- (void)showMsg:(NSString *)msg</span><br><span class="line">&#123;</span><br><span class="line">  NSLog(@&quot;%@&quot;, [NSString stringWithFormat:@&quot;Message is: %@&quot;, msg]);</span><br><span class="line">&#125;</span><br><span class="line">@end</span><br><span class="line">@protocol AbstractColleagueProtocol &lt;NSObject&gt;</span><br><span class="line">@optional</span><br><span class="line">- (void) sendMsg: (NSString *) msg;</span><br><span class="line">@end</span><br><span class="line">@interface Colleague : NSObject &lt;AbstractColleagueProtocol&gt;</span><br><span class="line">@property (nonatomic, strong) Mediator *mediator;</span><br><span class="line">@property (nonatomic, strong) NSString *name;</span><br><span class="line">- (instancetype) initWithName: (NSString *)name;</span><br><span class="line">@end</span><br><span class="line">@implementation Colleague</span><br><span class="line">- (instancetype)initWithName:(NSString *)name</span><br><span class="line">&#123;</span><br><span class="line">  if (self &#x3D; [super init]) &#123;</span><br><span class="line">    _name &#x3D; name;</span><br><span class="line">    _mediator &#x3D; [[Mediator alloc] init];</span><br><span class="line">  &#125;</span><br><span class="line">  return self;</span><br><span class="line">&#125;</span><br><span class="line">- (void)sendMsg:(NSString *)msg</span><br><span class="line">&#123;</span><br><span class="line">  [self.mediator showMsg:[NSString stringWithFormat:@&quot;[%@]: %@&quot;, self.name, msg]];</span><br><span class="line">&#125;</span><br><span class="line">@end</span><br><span class="line">&#x2F;&#x2F; 使用</span><br><span class="line">Colleague *colleague1 &#x3D; [[Colleague alloc] initWithName:@&quot;Jack&quot;];</span><br><span class="line">Colleague *colleague2 &#x3D; [[Colleague alloc] initWithName:@&quot;John&quot;];</span><br><span class="line">[colleague1 sendMsg:@&quot;Hi, John!&quot;];</span><br><span class="line">[colleague2 sendMsg:@&quot;Hello, Jack&quot;];</span><br></pre></td></tr></table></figure>

        </div>
        

    </article>
    
    <section id="comments">
        
            <div id="disqus_thread">
                <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript" target="_blank" rel="noopener">comments powered by Disqus.</a></noscript>
            </div>
        
    </section>


    

</main>


<aside style="" id="sidebar" class="aside aside-fixture">
    <div class="toc-sidebar">
        <nav id="toc" class="article-toc">
            <h3 class="toc-title">Catalogue</h3>
            <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#单例模式"><span class="toc-number">1.</span> <span class="toc-text">单例模式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#工厂模式"><span class="toc-number">2.</span> <span class="toc-text">工厂模式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#抽象工厂模式"><span class="toc-number">3.</span> <span class="toc-text">抽象工厂模式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#原型模式"><span class="toc-number">4.</span> <span class="toc-text">原型模式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#生成器模式"><span class="toc-number">5.</span> <span class="toc-text">生成器模式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#代理模式"><span class="toc-number">6.</span> <span class="toc-text">代理模式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#适配器模式"><span class="toc-number">7.</span> <span class="toc-text">适配器模式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#外观模式"><span class="toc-number">8.</span> <span class="toc-text">外观模式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#桥接模式"><span class="toc-number">9.</span> <span class="toc-text">桥接模式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#装饰器模式"><span class="toc-number">10.</span> <span class="toc-text">装饰器模式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#观察者模式"><span class="toc-number">11.</span> <span class="toc-text">观察者模式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#策略模式"><span class="toc-number">12.</span> <span class="toc-text">策略模式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#责任链模式"><span class="toc-number">13.</span> <span class="toc-text">责任链模式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Target-Action模式"><span class="toc-number">14.</span> <span class="toc-text">Target-Action模式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#中介者模式"><span class="toc-number">15.</span> <span class="toc-text">中介者模式</span></a></li></ol>
        </nav>
    </div>
</aside>





        </section>
        <footer class="hidden lg:block fixed bottom-0 left-0 sm:w-1/12 lg:w-1/6 bg-gray-100 z-40">
    
    <div class="footer-social-links">
        
            <a href="https://github.com/NULL-2333" target="_blank" rel="noopener">
                <i class="iconfont icon-github"></i>
            </a>
        
    </div>
    
    
</footer>

        <div id="mask" class="hidden mask fixed inset-0 bg-gray-900 opacity-75 z-40"></div>
        <div id="search-view-container" class="hidden shadow-xl"></div>
        
<script src="/js/dom-event.min.js"></script>

<script src="//cdn.jsdelivr.net/npm/yox@1.0.0-alpha.121/dist/standard/prod/yox.min.js"></script>


<script src="/js/search.min.js"></script>


    <script defer>
    var disqus_config = function () {
        
            this.page.url = 'http://yoursite.com/iOS%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/';
        
        this.page.identifier = 'iOS设计模式';
    };
    (function() {
        var d = document, s = d.createElement('script');
        s.src = '//' + '' + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>



    <script src="//cdn.jsdelivr.net/npm/lightgallery.js@1.1.3/dist/js/lightgallery.min.js"></script>
    
<script src="/js/light-gallery.min.js"></script>





    </body>
</html>
